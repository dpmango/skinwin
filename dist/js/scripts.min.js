(function(){var t,s={}.hasOwnProperty;document,t=window,t.cnvCircleStat=function(){function t(t){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.objects={},this._objects={},this.patterns={},this.P={centerX:300,centerY:300,radius:217,isAnimate:!1,sectorMargin:.013,_d:.03}}return t.prototype.init=function(t){var i,e,r;e=-.5*Math.PI;for(i in t)s.call(t,i)&&(r=t[i],this.objects[r.id]=this.createSectorObj(r,e),e=this.objects[r.id].endAngle);this.canvas.onclick=function(t){return function(){if(t.P.isAnimate=!t.P.isAnimate,t.P.isAnimate)return t.draw()}}(this),this.draw()},t.prototype.update=function(t){var i,e,r;e=-.5*Math.PI;for(i in t)s.call(t,i)&&(r=t[i],this._objects[r.id]=this.createSectorObj(r,e),e=this._objects[r.id].endAngle,this.objects[r.id]||(this.objects[r.id]=JSON.parse(JSON.stringify(this._objects[r.id])),this.objects[r.id].startAngle=this.objects[r.id].startAngle+(this.objects[r.id].endAngle-this.objects[r.id].startAngle)/2,this.objects[r.id].endAngle=this.objects[r.id].startAngle));this.P.isAnimate=!1,setTimeout(function(t){return function(){return t.P.isAnimate=!0,t.draw()}}(this),150)},t.prototype.addToPatterns=function(t){var s;if(void 0===this.patterns[t])return this.patterns[t]=!1,s=new Image,s.onload=function(i){return function(){return i.patterns[t]=s,i.draw(!1)}}(this),s.src=t},t.prototype.createSectorObj=function(t,s){return this.addToPatterns(t.picture),{id:t.id,type:"MainSector",startAngle:s,endAngle:s+2*Math.PI*(t.percent/100),color:t.color,picture:t.picture,percent:t.percent}},t.prototype.drawMainCircle=function(){return this.ctx.beginPath(),this.ctx.arc(this.P.centerX,this.P.centerY,this.P.radius,0,2*Math.PI),this.ctx.strokeStyle="#4f7273",this.ctx.lineWidth=2,this.ctx.shadowBlur=0,this.ctx.stroke()},t.prototype.drawMainSector=function(t,s,i){if(!(t>=s))return this.ctx.beginPath(),this.ctx.arc(this.P.centerX,this.P.centerY,this.P.radius,t,s),this.ctx.strokeStyle=i,this.ctx.lineWidth=6,this.ctx.shadowBlur=20,this.ctx.shadowColor=i,this.ctx.stroke()},t.prototype.drawLegend=function(t){var s,i,e,r;if(!(t.percent<=0))return i=t.startAngle+(t.endAngle-t.startAngle)/2,e=Math.cos(i),r=Math.sin(i),this.ctx.shadowBlur=0,s=this.P.radius+40,this.patterns[t.picture]&&this.ctx.drawImage(this.patterns[t.picture],this.P.centerX+e*s-18,this.P.centerY+r*s-18,36,36),this.ctx.font="bold 12px serif",this.ctx.fillStyle="#fff",this.ctx.textAlign="center",this.ctx.fillText(t.percent.toFixed(1)+"%",this.P.centerX+e*s,this.P.centerY+r*s+4),this.ctx.beginPath(),this.ctx.arc(this.P.centerX+e*s,this.P.centerY+r*s,21,0,2*Math.PI),this.ctx.strokeStyle=t.color,this.ctx.lineWidth=2,this.ctx.stroke(),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(this.P.centerX+e*s,this.P.centerY+r*s,24,i-.2*Math.PI+Math.PI,i+.2*Math.PI+Math.PI),this.ctx.lineTo(this.P.centerX+e*(s-30),this.P.centerY+r*(s-30)),this.ctx.fillStyle=t.color,this.ctx.lineWidth=3,this.ctx.closePath(),this.ctx.fill()},t.prototype.updMainSector=function(t){var s,i;return i=0,(s=this._objects[t.id])&&(t.startAngle<s.startAngle-this.P._d?(t.startAngle+=this.P._d,i=1):t.startAngle>s.startAngle+this.P._d?(t.startAngle-=this.P._d,i=1):t.startAngle=s.startAngle,t.endAngle<s.endAngle-this.P._d?(t.endAngle+=this.P._d,i=1):t.endAngle>s.endAngle+this.P._d?(t.endAngle-=this.P._d,i=1):t.endAngle=s.endAngle,t.percent<s.percent-.25?(t.percent+=.25,i=1):t.percent>s.percent+.25?(t.percent-=.25,i=1):t.percent=s.percent),i},t.prototype.draw=function(t){var i,e,r,h,n;null==t&&(t=!0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),h=0,this.drawMainCircle(),n=this.objects;for(r in n)s.call(n,r)&&(i=n[r],"MainSector"===i.type&&(h+=this.updMainSector(i),this.drawMainSector(i.startAngle+this.P.sectorMargin,i.endAngle-this.P.sectorMargin,i.color),this.drawLegend(i)));if(this.P.isAnimate=!!h,this.P.isAnimate&&t)return e=function(t){return function(){return t.draw()}}(this),requestAnimationFrame(e)},t}()}).call(this),function(){var t,s;t=jQuery,s=window,document,s.hScrollBox=function(){function i(s,i,e){this.step=null!=i?i:.5,this.shrinkLastItems=null!=e&&e,this.jHSBs=t(""+s),this.jWrap=t(".h-scroll-box-wrap",this.jHSBs),this.jItems=t(".h-scroll-box-item",this.jWrap),this.jBar=t(".h-scroll-box-bar",this.jHSBs),this.jScroller=t("div",this.jBar),this.wrapWidth=this.scrollerWidth=0,this.jtemParams=[]}return i.instance=function(t,s,i){var e;return null==s&&(s=.5),null==i&&(i=!1),e=new this(t,s,i),e.init(),e},i.prototype.init=function(){this.jItems.each(function(t){return function(s){if(t.wrapWidth+=t.jItems.eq(s).outerWidth(!0),t.shrinkLastItems)return t.initItemParams(t.jItems.eq(s),s)}}(this)),this.jWrap.width(this.wrapWidth),this.update(),t(s).resize(function(t){return function(){return t.update(t.jWrap.position().left,t.jScroller.position().left)}}(this)),this.jHSBs.on("DOMMouseScroll mousewheel",function(t){return function(s){var i,e;s.originalEvent.wheelDelta>0||s.originalEvent.detail<0?(e=t.jWrap.position().left+t.jHSBs.width()*t.step,i=t.jScroller.position().left-t.scrollerWidth*t.step,!t.endScrollLeft&&t.scrollerWidth>0&&s.preventDefault()):(e=t.jWrap.position().left-t.jHSBs.width()*t.step,i=t.jScroller.position().left+t.scrollerWidth*t.step,!t.endScrollRight&&t.scrollerWidth>0&&s.preventDefault()),console.log("scroll"+t.endScrollLeft),t.update(e,i)}}(this))},i.prototype.initItemParams=function(t,s){return this.jtemParams[s]={left:t.position().left,width:t.outerWidth(!0)}},i.prototype.updateItems=function(t){var s,i,e,r,h,n,c;for(r=1e4,n=this.jtemParams,c=[],s=e=0,h=n.length;e<h;s=++e)i=n[s],s>r?c.push(this.jItems.eq(s).addClass("is-last-item")):i.left>=this.jHSBs.width()-t-i.width-10?(r=s,c.push(this.jItems.eq(s).addClass("is-last-item"))):c.push(this.jItems.eq(s).removeClass("is-last-item"));return c},i.prototype.update=function(t,s){if(null==t&&(t=0),null==s&&(s=0),this.jHSBs.outerWidth()-this.wrapWidth>=0?(t=s=0,this.jWrap.width("auto"),this.jScroller.width(0)):(this.jWrap.width(this.wrapWidth),this.scrollerWidth=this.jBar.width()*this.jHSBs.width()/this.wrapWidth,this.jScroller.width(this.scrollerWidth),t=function(){switch(!1){case!(t>0):return 0;case!(t<this.jHSBs.width()-this.wrapWidth):return this.jHSBs.width()-this.wrapWidth;default:return t}}.call(this),s=function(){switch(!1){case!(s<0):return 0;case!(s>this.jBar.width()-this.scrollerWidth):return this.jBar.width()-this.scrollerWidth;default:return s}}.call(this)),this.endScrollLeft=0===s?1:0,this.endScrollRight=s===this.jBar.width()-this.scrollerWidth?1:0,console.log("update"+this.endScrollLeft),this.jWrap.css("transform","translateX("+t+"px)"),this.jScroller.css("transform","translateX("+s+"px)"),this.shrinkLastItems)return this.updateItems(t)},i}()}.call(this),function(){var t,s={}.hasOwnProperty;t=window,document,t.cnvRoulette=function(){function t(t){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.objects=[],this.patterns={},this.P={background:"images/roulette-bg.png",centerX:this.canvas.width/2,centerY:this.canvas.height/2,picture:{width:54,height:54},chip:{width:90,height:82,amount:15},outlineRadius:32,speed:20,slowdown_step:3,minSpeed:4}}return t.prototype.init=function(t){var i,e,r,h,n,c,o,a;if(r=t.length,this.P.chip.amount>r)for(n=h=o=r,a=this.P.chip.amount;o<=a?h<a:h>a;n=o<=a?++h:--h)i=n%r,t.push(JSON.parse(JSON.stringify(t[i])));for(e in t)s.call(t,e)&&(c=t[e],this.objects[e]=this.createPlayerObj(c,e));this._l=this.objects.length,this._d=0,this._a=0,this.winner_id=null,this.addPattern(this.P.background),this.status="init"},t.prototype.start=function(){if("init"===this.status||"stop"===this.status)return this.winner_id=null,this._a=0,this.P.speed=20,this.status="spin",this.draw()},t.prototype.stop=function(t,s){var i,e,r,h;for(this.afterStop=s,this.status="slowdown",e=Math.floor(this.P.speed/this.P.slowdown_step),i=r=0,h=this.objects.length;0<=h?r<h:r>h;i=0<=h?++r:--r)this.objects[i].id===t&&null===this.winner_id&&(this.winner_id=i);return this.slowDownTimer=setInterval(function(t){return function(){if(e-- >0&&(t.P.speed-=t.P.slowdown_step,t.P.speed<t.P.minSpeed))return t.P.speed=t.P.minSpeed}}(this),1e3)},t.prototype.addPattern=function(t){var s;if(void 0===this.patterns[t])return this.patterns[t]=!1,s=new Image,s.onload=function(i){return function(){return i.patterns[t]=s,i.draw(!1)}}(this),s.src=t},t.prototype.createPlayerObj=function(t,s){return this.addPattern(t.picture),this.addPattern(t.big_picture),{id:t.id,num:s,color:t.color,picture:t.picture,big_picture:t.big_picture,x:(s-1)*this.P.chip.width}},t.prototype.toGray=function(){var t,s,i,e;for(e=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),s=e.data,i=0;i<s.length;)t=.34*s[i]+.5*s[i+1]+.16*s[i+2],s[i]=t,s[i+1]=t,s[i+2]=t,i+=4;this.ctx.putImageData(e,0,0)},t.prototype.drawPlayer=function(t,s){if(this.ctx.beginPath(),this.ctx.arc(t+this.P.chip.width/2,this.P.centerY,this.P.outlineRadius,0,2*Math.PI),this.ctx.strokeStyle=s.color,this.ctx.lineWidth=2,this.ctx.shadowBlur=6,this.ctx.shadowColor=s.color,this.ctx.stroke(),this.ctx.shadowBlur=0,this.patterns[s.picture])return this.ctx.drawImage(this.patterns[s.picture],t+(this.P.chip.width-this.P.picture.width)/2,(this.canvas.height-this.P.picture.height)/2,54,54)},t.prototype.drawWinner=function(){if(this.ctx.beginPath(),this.ctx.arc(this.P.centerX,this.P.centerY,56,0,2*Math.PI),this.ctx.strokeStyle=this.objects[this.winner_id].color,this.ctx.lineWidth=3,this.ctx.shadowBlur=3,this.ctx.shadowColor=this.objects[this.winner_id].color,this.ctx.stroke(),this.ctx.shadowBlur=0,this.patterns[this.objects[this.winner_id].big_picture])return this.ctx.drawImage(this.patterns[this.objects[this.winner_id].big_picture],this.P.centerX-48,this.P.centerY-48,96,96)},t.prototype.drawPointer=function(t){var s;return null==t&&(t=.1),s=5,t>1&&(t=1),this.ctx.fillStyle="rgba(238, 23, 23, "+t+")",this.ctx.beginPath(),this.ctx.moveTo(this.P.centerX-20,s),this.ctx.lineTo(this.P.centerX+20,s),this.ctx.lineTo(this.P.centerX,34+s),this.ctx.closePath(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(this.P.centerX-20,this.canvas.height-s),this.ctx.lineTo(this.P.centerX+20,this.canvas.height-s),this.ctx.lineTo(this.P.centerX,this.canvas.height-34-s),this.ctx.closePath(),this.ctx.fill()},t.prototype.drawBg=function(){if(this.patterns[this.P.background])return this.ctx.shadowBlur=0,this.ctx.drawImage(this.patterns[this.P.background],-170,14,1425,93)},t.prototype.draw=function(t){var s,i,e,r,h,n;if(null==t&&(t=!0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawBg(),("spin"===this.status||"slowdown"===this.status)&&(this._d+=this.P.speed,this._d>=this.P.chip.width))for(this._d=0,this.objects[this.objects.length-1].x=this.objects[0].x,i=e=0,h=this.objects.length-1;0<=h?e<h:e>h;i=0<=h?++e:--e)this.objects[i].x=this.objects[i+1].x;for("slowdown"===this.status&&(this.P.speed<=this.P.minSpeed&&this.objects[this.winner_id].x+1.5*this.P.chip.width+this._d>=this.P.centerX&&this.objects[this.winner_id].x+this.P.chip.width/2+this._d<=this.P.centerX&&(this.P.speed=1,clearInterval(this.slowDownTimer)),1===this.P.speed&&this.objects[this.winner_id].x+this.P.chip.width/2+this._d>=this.P.centerX&&(this.status="stop","function"==typeof this.afterStop&&this.afterStop())),i=r=0,n=this.objects.length;0<=n?r<n:r>n;i=0<=n?++r:--r)this.drawPlayer(this.objects[i].x+this._d,this.objects[i]);if("init"!==this.status&&"stop"!==this.status||this.toGray(),"slowdown"!==this.status&&"stop"!==this.status||this.drawPointer(this._a+=.05),"stop"===this.status&&this.drawWinner(),("slowdown"===this.status||"spin"===this.status||"winner_showing"===this.status)&&t)return s=function(t){return function(){return t.draw()}}(this),requestAnimationFrame(s)},t}()}.call(this),function(){var t,s,i;t=jQuery,i=window,s=document,i.cvScrollBox=function(){function i(i,e){this.color=null!=e?e:"#ffffff",this.jScrBox=t(i),this.jScrBoxWrap=t(".rscroll-box-wrap",this.jScrBox),this.jItems=t(".rscroll-box-item",this.jScrBox),this.jItemsWraps=t(".rscroll-box-item-wrap",this.jScrBox),t(".scrl-canvas",this.jScrBox).attr("id",i+"_canvas"),this.canvas=s.getElementById(i+"_canvas"),this.ctx=this.canvas.getContext("2d"),this.o1={x:380.1021,y:205.6397,r:367.1046,sa:-.1956,ea:.5945},this.scrollerHeight=0,this.step=25,this.max_xt=70,this.jtemParams=[]}return i.instance=function(t,s){var i;return null==s&&(s="#ffffff"),i=new this(t,s),i.init(),i},i.prototype.init=function(){return this.jScrBoxWrap.scrollTop(0),this.jItems.each(function(t){return function(s){return t.initItemParams(t.jItems.eq(s),s)}}(this)),this.update(),this.scrollerHeight=this.jScrBox.height()/((this.jScrBoxWrap.height()+this.jScrBoxWrap.get(0).scrollHeight)/100),this.jScrBoxWrap.on("scroll",function(t){return function(){var s,i;i=t.jScrBoxWrap.scrollTop(),s=100-i/((t.jScrBoxWrap.get(0).scrollHeight-t.jScrBoxWrap.height())/100),t.draw(t.scrollerHeight,s),t.update()}}(this)),this.jScrBoxWrap.trigger("scroll")},i.prototype.initItemParams=function(t,s){return this.jtemParams[s]=t.position().top+t.outerHeight()/2},i.prototype.update=function(){var t,s,i,e,r,h,n;for(r=this.jtemParams,h=[],s=i=0,e=r.length;i<e;s=++i)n=r[s],t=function(){switch(!1){case!(n<this.jScrBoxWrap.scrollTop()):return this.max_xt;case!(n<this.jScrBoxWrap.scrollTop()+this.step):return this.max_xt-15;case!(n<this.jScrBoxWrap.scrollTop()+2*this.step):return this.max_xt-18;case!(n<this.jScrBoxWrap.scrollTop()+3*this.step):return this.max_xt-30;case!(n<this.jScrBoxWrap.scrollTop()+4*this.step):return this.max_xt-40.5;case!(n<this.jScrBoxWrap.scrollTop()+5*this.step):return this.max_xt-51;case!(n<this.jScrBoxWrap.scrollTop()+6*this.step):return this.max_xt-54;case!(n<this.jScrBoxWrap.scrollTop()+7*this.step):return this.max_xt-60;case!(n<this.jScrBoxWrap.scrollTop()+8*this.step):return this.max_xt-67.5;case!(n<this.jScrBoxWrap.scrollTop()+9*this.step):return this.max_xt-72;case!(n<this.jScrBoxWrap.scrollTop()+10*this.step):return this.max_xt-64.5;case!(n<this.jScrBoxWrap.scrollTop()+11*this.step):return this.max_xt-58.5;case!(n<this.jScrBoxWrap.scrollTop()+12*this.step):return this.max_xt-48;case!(n<this.jScrBoxWrap.scrollTop()+13*this.step):return this.max_xt-42;case!(n<this.jScrBox.height()):default:return this.max_xt}}.call(this),h.push(this.jItemsWraps.eq(s).css("transform","translateX("+t+"px)"));return h},i.prototype.drawSectorBar=function(){return this.ctx.beginPath(),this.ctx.arc(this.o1.x,this.o1.y,this.o1.r,Math.PI+this.o1.sa,Math.PI+this.o1.ea),this.ctx.arc(this.o1.x+7,this.o1.y,this.o1.r,Math.PI+this.o1.ea,Math.PI+this.o1.sa,1),this.ctx.strokeStyle="#18140a",this.ctx.fillStyle="#18140a",this.ctx.lineWidth=1,this.ctx.shadowColor="#18140a",this.ctx.shadowBlur=1,this.ctx.closePath(),this.ctx.fill()},i.prototype.drawSectorScroller=function(t,s){var i,e,r,h,n;return null==t&&(t=30),null==s&&(s=10),this.ctx.lineWidth=1,this.ctx.strokeStyle=this.color,r=Math.abs(this.o1.ea-this.o1.sa)/100,n=t*r,e=(this.o1.ea-n-this.o1.sa)/100,h=this.o1.sa+e*s,i=h+n,this.ctx.beginPath(),this.ctx.arc(this.o1.x,this.o1.y,this.o1.r,Math.PI+h,Math.PI+i),this.ctx.arc(this.o1.x+7,this.o1.y,this.o1.r,Math.PI+i,Math.PI+h,1),this.ctx.fillStyle=this.color,this.ctx.shadowColor=this.color,this.ctx.shadowBlur=10,this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke()},i.prototype.draw=function(t,s){null==t&&(t=10),null==s&&(s=0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawSectorBar(),this.drawSectorScroller(t,s)},i}()}.call(this);var scrollHistory,scrollTopList;$(".tab-link").click(function(){var t=$(this).attr("data-key");$(".tab-link").removeClass("is-btn-active"),$(this).addClass("is-btn-active"),$(".tab").addClass("is-hidden"),$(".tab-"+t).removeClass("is-hidden"),"history"!=t||scrollHistory?"top-list"!=t||scrollTopList||setTimeout(function(){scrollTopList=cvScrollBox.instance(document.getElementById("rbox2"),"#de00ff")},100):setTimeout(function(){scrollHistory=cvScrollBox.instance(document.getElementById("rbox1"),"#ff9600")},100)}),$(".sandwich").click(function(){$(this).toggleClass("is-sandwich-open")}),$(".chat-btn").click(function(){$(this).addClass("is-chat-btn-hidden"),$(".chat").removeClass("is-chat-hidden")}),$(".chat-header").click(function(){$(this).parent().addClass("is-chat-hidden"),$(".chat-btn").removeClass("is-chat-btn-hidden")});var objs={1:{id:"a1",percent:35,color:"#afca05",picture:"images/assets/Desert3.png"},2:{id:"a2",percent:35,color:"#e5007d",picture:"images/assets/Desert3.png"},3:{id:"a3",percent:30,color:"#ffcc00",picture:"images/assets/Desert3.png"},4:{id:"a4",percent:0,color:"#008bd2",picture:"images/assets/Desert3.png"}},updObjs={1:{id:"a1",percent:39.5,color:"#afca05",picture:"images/assets/Desert3.png"},2:{id:"a2",percent:10.5,color:"#e5007d",picture:"images/assets/Desert3.png"},3:{id:"a3",percent:47.5,color:"#ffcc00",picture:"images/assets/Desert3.png"},4:{id:"a4",percent:2.5,color:"#008bd2",picture:"images/assets/Desert3.png"}},cnvCircleStat=new cnvCircleStat(document.getElementById("canvas1"));cnvCircleStat.init(objs),upd=1,$(".l-game-cs-stat").click(function(){1==upd?(cnvCircleStat.update(updObjs),upd=2):(cnvCircleStat.update(objs),upd=1)}),hScrollBox.instance("#sbx1",1),hScrollBox.instance("#sbx2",.5),hScrollBox.instance("#sbx3",1,!0);var objs2=[{id:"p1",color:"#afca05",picture:"images/assets/Desert4.png",big_picture:"images/assets/Desert5.png"},{id:"p2",color:"#e5007d",picture:"images/assets/Koala4.png",big_picture:"images/assets/Koala4.png"},{id:"p3",color:"#ffcc00",picture:"images/assets/Penguins4.png",big_picture:"images/assets/Penguins4.png"}],canv=document.getElementById("canvas2"),cnvRoulette=new cnvRoulette(canv);cnvRoulette.init(objs2);var game=0,$rW=$(".roulette-winner");document.getElementsByClassName("roulette")[0].onclick=function(){game?cnvRoulette.stop("p1",function(){$rW.removeClass("is-hidden"),game=0}):(cnvRoulette.start(),game=1,$rW.addClass("is-hidden"))};